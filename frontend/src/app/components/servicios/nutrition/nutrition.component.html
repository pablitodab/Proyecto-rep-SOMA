<app-header></app-header>

<section class="nutrition-container">
  <h2>Seguimiento Nutricional</h2>
  <p class="descripcion">
    Registra tu consumo calórico, actividad física y balance de macronutrientes para un control completo de tu nutrición.
  </p>

  <form (ngSubmit)="agregarRegistro()" class="form-nutricion">
    <div class="form-section">
      <h3>📅 Datos Generales</h3>
      <div class="form-group">
        <label for="fecha">Fecha:</label>
        <input 
          type="date" 
          id="fecha" 
          [(ngModel)]="nuevoRegistro.fecha" 
          name="fecha"
          required
        >
      </div>
    </div>

    <div class="form-section">
      <h3>🔥 Balance Calórico</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="calorias_ingeridas">Calorías consumidas (kcal):</label>
          <input 
            type="number" 
            id="calorias_ingeridas" 
            [(ngModel)]="nuevoRegistro.calorias_ingeridas" 
            name="calorias_ingeridas"
            min="0"
            required
          >
        </div>
        <div class="form-group">
          <label for="calorias_gastadas">Calorías gastadas (kcal):</label>
          <input 
            type="number" 
            id="caloriasGastadas" 
            [(ngModel)]="nuevoRegistro.calorias_gastadas" 
            name="calorias_gastadas"
            min="0"
            required
          >
        </div>
      </div>
    </div>

    <div class="form-section">
      <h3>🏃 Actividad Física</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="km_caminados">Kilómetros caminados:</label>
          <input 
            type="number" 
            step="0.1" 
            id="km_caminados" 
            [(ngModel)]="nuevoRegistro.km_caminados" 
            name="km_caminados"
            min="0"
          >
        </div>
        <div class="form-group">
          <label for="cardioDesc">Tipo de cardio:</label>
          <input 
            type="text" 
            id="cardioDesc" 
            [(ngModel)]="nuevoRegistro.cardioDesc" 
            name="cardioDesc"
          >
        </div>
        <div class="form-group">
          <label for="tiempoCardio">Tiempo (min):</label>
          <input 
            type="number" 
            id="tiempoCardio" 
            [(ngModel)]="nuevoRegistro.tiempoCardio" 
            name="tiempoCardio"
            min="0"
          >
        </div>
        <div class="form-group">
          <label for="distanciaCardio">Distancia (km):</label>
          <input 
            type="number" 
            step="0.1" 
            id="distanciaCardio" 
            [(ngModel)]="nuevoRegistro.distanciaCardio" 
            name="distanciaCardio"
            min="0"
          >
        </div>
      </div>
    </div>

    <div class="form-section">
      <h3>🍽️ Macronutrientes</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="carbohidratos">Carbohidratos (g):</label>
          <input 
            type="number" 
            id="carbohidratos" 
            [(ngModel)]="nuevoRegistro.carbohidratos" 
            name="carbohidratos"
            min="0"
          >
        </div>
        <div class="form-group">
          <label for="proteinas">Proteínas (g):</label>
          <input 
            type="number" 
            id="proteinas" 
            [(ngModel)]="nuevoRegistro.proteinas" 
            name="proteinas"
            min="0"
          >
        </div>
        <div class="form-group">
          <label for="grasas">Grasas (g):</label>
          <input 
            type="number" 
            id="grasas" 
            [(ngModel)]="nuevoRegistro.grasas" 
            name="grasas"
            min="0"
          >
        </div>
      </div>
    </div>

    <button type="submit" [disabled]="!esFormularioValido()">
      {{ editando ? 'Actualizar' : 'Guardar' }} Registro
    </button>
  </form>

  <div class="registros-list">
    <h3>Historial de Registros</h3>
    <div *ngFor="let registro of registros" class="registro-card">
      <div class="registro-header">
        <h4>{{ registro.fecha | date:'dd/MM/yyyy' }}</h4>
        <div class="acciones">
          <button (click)="editarRegistro(registro)">✏️</button>
          <button (click)="eliminarRegistro(registro.id!)">🗑️</button>
        </div>
      </div>
      
      <div class="registro-content">
        <div class="registro-section">
          <p><strong>Balance Calórico:</strong></p>
          <ul>
            <li>Consumidas: {{ registro.calorias_ingeridas }} kcal</li>
            <li>Gastadas: {{ registro.calorias_gastadas }} kcal</li>
            <li>Neto: {{ registro.calorias_ingeridas - registro.calorias_gastadas }} kcal</li>
          </ul>
        </div>

        <div class="registro-section" *ngIf="registro.km_caminados > 0">
          <p><strong>Actividad Física:</strong></p>
          <ul>
            <li>Km caminados: {{ registro.km_caminados }}</li>
            <li *ngIf="registro.cardioDesc">Cardio: {{ registro.cardioDesc }}</li>
            <li *ngIf="registro.tiempoCardio">Tiempo: {{ registro.tiempoCardio }} min</li>
            <li *ngIf="registro.distanciaCardio">Distancia: {{ registro.distanciaCardio }} km</li>
          </ul>
        </div>

        <div class="registro-section" *ngIf="registro.carbohidratos || registro.proteinas || registro.grasas">
          <p><strong>Macronutrientes:</strong></p>
          <ul>
            <li *ngIf="registro.carbohidratos">Carbohidratos: {{ registro.carbohidratos }}g</li>
            <li *ngIf="registro.proteinas">Proteínas: {{ registro.proteinas }}g</li>
            <li *ngIf="registro.grasas">Grasas: {{ registro.grasas }}g</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<app-footer></app-footer>

